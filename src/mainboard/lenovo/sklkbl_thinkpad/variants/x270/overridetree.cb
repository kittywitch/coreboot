# SPDX-License-Identifier: GPL-2.0-only

chip soc/intel/skylake
	device domain 0 on
		device ref south_xhci on
			register "usb2_ports" = "{
				[0] = USB2_PORT_MID(OC0),		// JUSB1 (USB-A always on)
				[1] = USB2_PORT_MID(OC1),		// JUSB2 (USB-A)
				[2] = USB2_PORT_MID(OC_SKIP),		// JFPR (smartcard slot)
				[3] = USB2_PORT_MID(OC_SKIP),		// JUSBC (USB docking station)
				[4] = USB2_PORT_MID(OC_SKIP),		// JIRCAM (IR camera)
				[5] = USB2_PORT_MID(OC_SKIP),		// JWWAN (M.2 WWAN USB)
				[6] = USB2_PORT_MID(OC_SKIP),		// JWLAN (M.2 WLAN USB)
				[7] = USB2_PORT_MID(OC_SKIP),		// JCAM (webcam)
				[8] = USB2_PORT_MID(OC_SKIP),		// JFPR (fingerprint reader)
				[9] = USB2_PORT_MID(OC_SKIP),		// JLCD (touch panel)
			}"
			register "usb3_ports" = "{
				[0] = USB3_PORT_DEFAULT(OC0),		// JUSB1 (USB-A always on)
				[1] = USB3_PORT_DEFAULT(OC1),		// JUSB2 (USB-A)
				[2] = USB3_PORT_DEFAULT(OC_SKIP),	// JSD (SD card reader)
				[3] = USB3_PORT_DEFAULT(OC_SKIP),	// JUSB3 (USB docking station)
			}"
		end

		# PCIe
		#   PCIe Controller 1 - 1x2 + 2x1
		#   PCIE 1     - RP1  - Media / SD   - CLKOUT0 - CLKREQ0
		#   PCIE 2     - USB3 Port
		#   PCIE 3     - RP3  - WiGig - CLKOUT1 - CLKREQ1
		#   PCIE 3     - RP3  - WLAN - CLKOUT2 - CLKREQ2
		#   PCIE 4     - GbE  - GbE  - CLKOUT3 - CLKREQ3
		#   PCIe Controller 2 - 1x4
		#   PCIE 5     - RP5  - NVMe - CLKOUT4 - CLKREQ4
		#   PCIe Controller 3 - 4x1
		#   PCIE 7     - RP8 - WWAN - CLKOUT5 - CLKREQ5
		#   PCIE 8     - Optane

		# Media / SD - x2
		device ref pcie_rp1 on
			register "PcieRpClkReqSupport[0]"		= "true"
			register "PcieRpClkReqNumber[0]"		= "0"
			register "PcieRpClkSrcNumber[0]"		= "0"
			register "PcieRpAdvancedErrorReporting[0]"	= "true"
			register "PcieRpHotPlug[0]"			= "true"
		end

		# M.2 WLAN x1
		device ref pcie_rp3 on
			register "PcieRpClkReqSupport[2]"		= "true"
			register "PcieRpClkReqNumber[2]"		= "2"
			register "PcieRpClkSrcNumber[2]"		= "2"
			register "PcieRpAdvancedErrorReporting[2]"	= "true"
			register "PcieRpLtrEnable[2]"			= "true"
			smbios_slot_desc "SlotTypeM2Socket1_DP" "SlotLengthOther" "M.2/A 2230" "SlotDataBusWidth1X"
		end

		# Ethernet (clobbers RP4)
                device ref gbe on
                        register "LanClkReqSupported"                   = "true"
                        register "LanClkReqNumber"                      = "3"
			register "PcieRpClkReqNumber[3]"		= "3"
			register "PcieRpClkSrcNumber[3]"		= "3"
                        register "EnableLanLtr"                         = "true"
                        register "EnableLanK1Off"                       = "true"
                end

		# M.2 2280 SSD - x4 (RP9)
		device ref pcie_rp5 on
			register "PcieRpClkReqSupport[4]"		= "true"
			register "PcieRpClkReqNumber[4]"		= "4"
			register "PcieRpClkSrcNumber[4]"		= "4"
			register "PcieRpAdvancedErrorReporting[4]"	= "true"
			register "PcieRpLtrEnable[4]"			= "true"
			register "PcieRpHotPlug[4]"			= "false"
			smbios_slot_desc "SlotTypeM2Socket3" "SlotLengthOther" "M.2/M 2280" "SlotDataBusWidth4X"
		end

		# M.2 WWAN x1
		device ref pcie_rp8 on
			register "PcieRpClkReqSupport[7]"		= "true"
			register "PcieRpClkReqNumber[7]"		= "5"
			register "PcieRpClkSrcNumber[7]"		= "5"
			register "PcieRpAdvancedErrorReporting[7]"	= "true"
			register "PcieRpLtrEnable[7]"			= "true"
			smbios_slot_desc "SlotTypeM2Socket1_DP" "SlotLengthOther" "M.2/A 2230" "SlotDataBusWidth1X"
		end
	end
end
